#include <bits/stdc++.h>
using namespace std;
int fun(vector<vector<int>> arr, pair<int, int> s, pair<int, int> f){
    queue<pair<int, pair<int, int>>> q;
    q.push({0, s});
    vector<vector<int>> vis(arr.size(), vector<int>(arr.size(), 0));
    vis[s.first][s.second] = 1;
    int dx[] = {-1, 0, 0, 1};
    int dy[] = {0, -1, 1, 0};
    while(!q.empty()){
        int l = q.front().first;
        int x = q.front().second.first;
        int y = q.front().second.second;
        q.pop();
        if(x == f.first && y == f.second)
            return l;
        for(int i=0;i<4;i++){
            if(x+dx[i]>=0 && x+dx[i]<arr.size() && y+dy[i]>=0 && y+dy[i]<arr.size() && 
            !vis[x+dx[i]][y+dy[i]] && arr[x+dx[i]][y+dy[i]]!=0){
                vis[x+dx[i]][y+dy[i]] = 1 ;
                q.push({l+1, {x+dx[i], y+dy[i]}});    
            }
        }
    }
    return -1;
}

int main(){
    int n;
    cin>>n;
    vector<vector<int>> arr(n, vector<int>(n, 0));
    pair<int, int> s, f;
    for(int i=0;i<n;i++)
        for(int j=0;j<n;j++){
            cin>>arr[i][j];
            if(arr[i][j] == 1)
                s = {i, j};
            if(arr[i][j] == 2)
                f = {i, j};
        }
    cout<<fun(arr, s, f);
}