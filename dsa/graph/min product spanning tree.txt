#include<bits/stdc++.h>
using namespace std;
int prims(vector<vector<int>> &larr, vector<vector<float>> &arr){
    priority_queue<pair<float, pair<int, int>>, vector<pair<float, pair<int, int>>>, greater<pair<float, pair<int, int>>>> pq;
    vector<int> vis(arr.size(), 0);
    pq.push({0.0, {1, 0}});
    int ans = 1;
    int ie=0;
    float mc;
    int v;
    int wt;
    while(ie<arr.size()){
        while(true){
            mc = pq.top().first;
            v = pq.top().second.second;
            wt = pq.top().second.first;
            pq.pop();
            if(vis[v] != 1) break;
        }
        vis[v] = 1;
        ans *= wt;
        ie++;
        for(int i=0;i<arr[v].size();i++){
            if(!vis[i] && arr[v][i]!=0)
                pq.push({arr[v][i], {larr[v][i], i}});
        }
    }
    return ans;
}
int main(){
    int t;
    cin>>t;
    while(t--){
        int n;
        cin>>n;
        vector<vector<int>> arr(n, vector<int>(n, 0));
        for(int i=0;i<n;i++)
            for(int j=0;j<n;j++)
                cin>>arr[i][j];
        vector<vector<float>> larr(n, vector<float>(n, 0));
        for(int i=0;i<n;i++)
            for(int j=0;j<n;j++)
                if(arr[i][j]!=0)
                    larr[i][j] = log(arr[i][j]);
        int ans = prims(arr, larr);
        cout<<ans<<endl;
    }
}